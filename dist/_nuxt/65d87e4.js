(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1149:function(e,t,n){"use strict";var r=n(950);n.n(r).a},1210:function(e,t,n){"use strict";n.r(t);n(15),n(10),n(13),n(7),n(14),n(22),n(70);var r=n(1),o=n(4),l=n(3),c=n(891),m=n(19);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}o.default.use(c.a);var _=o.default.extend({name:"Profile",data:function(){return{selectedTab:0,counter:0,editable:!1,pageLoaded:!1}},computed:f(f(f({},Object(l.e)({userData:function(e){return e.users.data.userData},isUpdateSuccess:function(e){return e.users.data.isUpdateSuccess}})),Object(l.d)({fullLang:"appHeader/fullLanguage",points:"users/points",memberRank:"users/memberRank",lang:"appHeader/language"})),{},{getMemberRankWithLanaguague:function(){var e,t=this,n=null===(e=this.memberRank)||void 0===e?void 0:e.find((function(e){return e.locale===t.$langFormat(t.lang)}));return null==n?void 0:n.name},tabs:function(){return{myprofile:{id:0,name:this.getLang.my_profile,routerLink:"/profile/my-profile",buttonName:"My Profile",pageCategory:"My Profile"},billHistory:{id:1,name:this.getLang.yourBooking,routerLink:"/profile/my-booking",buttonName:"My Booking",pageCategory:"My Booking"}}},getLang:function(){return{yourBooking:this.$t("headers.my_reservations"),joiningDate:this.$t("my_profile.joining_date"),birth_day:this.$t("my_profile.birth_day"),billHistory:this.$t("my_profile.bill_history"),editProfile:this.$t("my_profile.edit_profile"),miles:this.$t("hoteldetail.miles"),my_profile:this.$t("headers.my_profile"),are_you_sure_to_cancel_membership:this.$t("my_profile.are_you_sure_to_cancel_membership"),cancel_membership:this.$t("my_profile.cancel_membership"),fullNameJP:this.$t("login_signup.hi_user",{username:this.fullName})}},isValid:function(){return!this.$v.$invalid},fullName:function(){var e,t;return"en"===this.$i18n.locale?(null===(t=this.userData)||void 0===t?void 0:t.first_name)+" "+this.userData.last_name:(null===(e=this.userData)||void 0===e?void 0:e.last_name)+" "+this.userData.first_name}}),watch:{fullLang:function(){this.getReservasionsList()}},created:function(){this.getReservasionsList()},mounted:function(){this.pageLoaded=!0},methods:f(f({},Object(l.c)({handleUpdateUserInfo:"users/updateUserInfo",getMyRewards:"users/getMyRewards",getReservasionsList:"users/getReservasionsList",removeUser:"users/removeUser"})),{},{changeTab:function(e){this.$router.push(e.routerLink),this.$gtm.push({event:"clickMyBooking",pageCategory:e.pageCategory,language:this.$langFormat(this.lang),bookingButtonName:e.buttonName,sectionName:e.buttonName,triggerType:"User Interaction"})},onOpenCancelMembershipModal:function(){this.$refs["cancel-membership"].showModal()},onCancel:function(){this.$refs["cancel-membership"].hideModal()},onCancelMembership:function(){var e=this,t={body:{reason:""},hotel_id:m.g};this.$triplaRepo.users.cancelMembership(t).then((function(){e.$gtm.push({event:"cancelMembership",pageCategory:e.$route.name,language:e.$langFormat(e.lang),triggerType:"User Interaction"}),e.removeUser(),e.$router.push("/").catch((function(e){return e}))})).catch((function(t){var n,r=t.message&&(null===(n=t.message[0])||void 0===n?void 0:n.title);e.$refs["cancel-membership"].hideModal(),e.$bvToast.toast(r,{title:"Error",toaster:"b-toaster-top-center",solid:!0,appendToast:!0,variant:"danger"})}))}})}),h=(n(1149),n(5)),component=Object(h.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.pageLoaded?n("section",{staticClass:"my-profile-page-content"},[n("div",{staticClass:"my-profile-page-content__left"},[n("div",{staticClass:"my-profile-page-content__left__header"},[n("p",{staticClass:"my-profile-page-content__left__header--name text-capitalize"},[e._v("\n        "+e._s("ja"===e.lang?e.getLang.fullNameJP:e.fullName)+"\n      ")])]),e._v(" "),n("div",{staticClass:"my-profile-page-content__left__list-item"},[n("ul",e._l(e.tabs,(function(t,r){return n("li",{key:r,staticClass:"tab-item",class:{active:t.routerLink==e.$route.path},on:{click:function(n){return e.changeTab(t)}}},[n("div",[e._v(e._s(t.name))])])})),0)]),e._v(" "),n("div",{staticClass:"\n        my-profile-page-content__left__cancel-membership\n        d-none d-md-flex\n      "},[n("a",{staticClass:"cancel-membership-btn",on:{click:e.onOpenCancelMembershipModal}},[e._v("\n        "+e._s(e.getLang.cancel_membership)+"\n      ")])])]),e._v(" "),n("div",{staticClass:"my-profile-page-content__right"},[n("router-view")],1),e._v(" "),n("b-button",{staticClass:"d-none",on:{click:function(t){return e.toast("b-toaster-top-center")}}},[e._v("\n    Failed\n  ")]),e._v(" "),n("MyStayPopup",{ref:"cancel-membership",attrs:{size:"sm","modal-class":"modal-delete"}},[n("div",{staticClass:"cancel-membership-modal"},[n("div",{staticClass:"cancel-membership-modal__title"},[e._v("\n        "+e._s(e.getLang.are_you_sure_to_cancel_membership)+"\n      ")]),e._v(" "),n("div",{staticClass:"d-flex justify-content-between"},[n("button",{staticClass:"m-btn m-btn__white cancel-membership-modal__button",on:{click:e.onCancel}},[e._v("\n          "+e._s(e.$t("summary.cancel"))+"\n        ")]),e._v(" "),n("button",{staticClass:"m-btn m-btn__yellow cancel-membership-modal__button",on:{click:e.onCancelMembership}},[e._v("\n          "+e._s(e.$t("summary.confirm"))+"\n        ")])])])])],1):e._e()}),[],!1,null,"6d086d64",null);t.default=component.exports;installComponents(component,{MyStayPopup:n(350).default})},950:function(e,t,n){}}]);